# EKS environment with ECR private registry

# Use ECR image for our app
image:
  repository: 146624863550.dkr.ecr.eu-west-1.amazonaws.com/todo-list-repo
  tag: v1.2.1
  pullPolicy: Always

# MongoDB - use custom template
mongodb:
  storage: 
    storageClass: ebs-sc  # Use EBS StorageClass
    
# WebApp service - LoadBalancer with AWS annotations
webapp:
  service:
    type: LoadBalancer
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing

# Mongo Express service - LoadBalancer with AWS annotations
mongoExpress:
  service:
    type: LoadBalancer
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing

# Create EBS StorageClass 
storageClass:
  enabled: true
  name: ebs-sc
  provisioner: ebs.csi.aws.com
  volumeBindingMode: WaitForFirstConsumer
  parameters:
    type: gp3
    encrypted: "true"